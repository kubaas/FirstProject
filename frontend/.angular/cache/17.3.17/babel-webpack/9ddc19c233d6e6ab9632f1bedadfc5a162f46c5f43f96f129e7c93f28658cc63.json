{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { RouterLink } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../api.service\";\nimport * as i2 from \"@angular/common\";\nfunction PlanComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \" Strategia: \");\n    i0.ɵɵelementStart(2, \"b\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" \\u2022 Start tygodnia: \");\n    i0.ɵɵelementStart(5, \"b\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.plan.strategy);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.plan.weekStart);\n  }\n}\nfunction PlanComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1, \"\\u0141aduj\\u0119 plan...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PlanComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nfunction PlanComponent_div_13_tr_9_div_5_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const it_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", it_r2.notes, \" \");\n  }\n}\nfunction PlanComponent_div_13_tr_9_div_5_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tag_r3 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(tag_r3);\n  }\n}\nfunction PlanComponent_div_13_tr_9_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"div\")(2, \"span\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"b\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 10);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 20);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, PlanComponent_div_13_tr_9_div_5_div_10_Template, 2, 1, \"div\", 21);\n    i0.ɵɵelementStart(11, \"div\", 22);\n    i0.ɵɵtemplate(12, PlanComponent_div_13_tr_9_div_5_span_12_Template, 2, 1, \"span\", 23);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const it_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.mealTypeLabel(it_r2.mealType));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(it_r2.recipe.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \\u2022 \", it_r2.recipe.prepMinutes, \" min\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate4(\" \", it_r2.recipe.calories, \" kcal \\u2022 B: \", it_r2.recipe.proteinG, \"g \\u2022 W: \", it_r2.recipe.carbsG, \"g \\u2022 T: \", it_r2.recipe.fatG, \"g \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", it_r2.notes);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", it_r2.recipe.tags);\n  }\n}\nfunction PlanComponent_div_13_tr_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"b\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtemplate(5, PlanComponent_div_13_tr_9_div_5_Template, 13, 9, \"div\", 17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const d_r4 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(d_r4.dayIndex + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", d_r4.items);\n  }\n}\nfunction PlanComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13)(1, \"table\", 14)(2, \"thead\")(3, \"tr\")(4, \"th\", 15);\n    i0.ɵɵtext(5, \"Dzie\\u0144\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Posi\\u0142ki\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"tbody\");\n    i0.ɵɵtemplate(9, PlanComponent_div_13_tr_9_Template, 6, 2, \"tr\", 16);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.plan.days);\n  }\n}\nfunction PlanComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtext(1, \" Brak planu. Zr\\u00F3b onboarding. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction mealTypeLabel(t) {\n  switch (t) {\n    case 'BREAKFAST':\n      return 'Śniadanie';\n    case 'LUNCH':\n      return 'Obiad';\n    case 'DINNER':\n      return 'Kolacja';\n  }\n}\nexport let PlanComponent = /*#__PURE__*/(() => {\n  class PlanComponent {\n    constructor(api) {\n      this.api = api;\n      this.loading = false;\n      this.error = null;\n      this.plan = null;\n      const userId = localStorage.getItem('imo.userId');\n      if (!userId) return;\n      this.loading = true;\n      this.api.latestPlan(userId).subscribe({\n        next: p => {\n          this.plan = {\n            ...p,\n            days: normalizeDays(p.days)\n          };\n          this.loading = false;\n        },\n        error: e => {\n          this.loading = false;\n          this.error = `Błąd pobierania planu: ${e?.message ?? e}`;\n        }\n      });\n    }\n    mealTypeLabel(t) {\n      return mealTypeLabel(t);\n    }\n    static {\n      this.ɵfac = function PlanComponent_Factory(t) {\n        return new (t || PlanComponent)(i0.ɵɵdirectiveInject(i1.ApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PlanComponent,\n        selectors: [[\"ng-component\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 15,\n        vars: 5,\n        consts: [[1, \"card\"], [2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"align-items\", \"baseline\", \"gap\", \"12px\"], [2, \"margin\", \"0 0 6px\"], [\"class\", \"muted\", 4, \"ngIf\"], [2, \"display\", \"flex\", \"gap\", \"10px\"], [\"routerLink\", \"/onboarding\", 1, \"btn\", \"secondary\"], [\"routerLink\", \"/checkin\", 1, \"btn\"], [\"class\", \"muted\", \"style\", \"margin-top: 12px;\", 4, \"ngIf\"], [\"class\", \"error\", \"style\", \"margin-top: 12px;\", 4, \"ngIf\"], [\"style\", \"margin-top: 14px;\", 4, \"ngIf\"], [1, \"muted\"], [1, \"muted\", 2, \"margin-top\", \"12px\"], [1, \"error\", 2, \"margin-top\", \"12px\"], [2, \"margin-top\", \"14px\"], [1, \"table\"], [2, \"width\", \"70px\"], [4, \"ngFor\", \"ngForOf\"], [\"style\", \"margin-bottom: 10px;\", 4, \"ngFor\", \"ngForOf\"], [2, \"margin-bottom\", \"10px\"], [1, \"pill\"], [1, \"muted\", 2, \"margin-top\", \"4px\", \"font-size\", \"12px\"], [\"class\", \"muted\", \"style\", \"margin-top: 4px; font-size: 12px;\", 4, \"ngIf\"], [2, \"margin-top\", \"6px\"], [\"class\", \"pill\", 4, \"ngFor\", \"ngForOf\"]],\n        template: function PlanComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\")(3, \"h2\", 2);\n            i0.ɵɵtext(4, \"Plan na 7 dni\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(5, PlanComponent_div_5_Template, 7, 2, \"div\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 4)(7, \"a\", 5);\n            i0.ɵɵtext(8, \"Zmie\\u0144 profil\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"a\", 6);\n            i0.ɵɵtext(10, \"Zr\\u00F3b check-in\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(11, PlanComponent_div_11_Template, 2, 0, \"div\", 7)(12, PlanComponent_div_12_Template, 2, 1, \"div\", 8)(13, PlanComponent_div_13_Template, 10, 1, \"div\", 9)(14, PlanComponent_div_14_Template, 2, 0, \"div\", 7);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngIf\", ctx.plan);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.plan);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.plan && !ctx.loading && !ctx.error);\n          }\n        },\n        dependencies: [CommonModule, i2.NgForOf, i2.NgIf, RouterLink],\n        encapsulation: 2\n      });\n    }\n  }\n  return PlanComponent;\n})();\nfunction normalizeDays(days) {\n  return [...days].sort((a, b) => a.dayIndex - b.dayIndex);\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}